# Supabase Table Schemas for Trust Engine

## TelemetryData Table

Recommended columns:

| Column           | Type        | Description                        |
|------------------|-------------|------------------------------------|
| id               | bigint      | Primary key (auto-increment)       |
| vm_id            | text        | VM identifier                      |
| timestamp        | timestamptz | Event timestamp                    |
| event_type       | text        | Type of event                      |
| stride_category  | text        | STRIDE threat category             |
| risk_level       | int4        | Risk level (1-5)                   |
| features         | jsonb       | All 62 features as JSON            |

**Example SQL:**
```sql
create table if not exists "TelemetryData" (
  id bigint generated by default as identity primary key,
  vm_id text not null,
  timestamp timestamptz not null,
  event_type text,
  stride_category text,
  risk_level int4,
  features jsonb
);
```

---

## TrustScore Table

Recommended columns:

| Column        | Type        | Description                        |
|---------------|-------------|------------------------------------|
| id            | bigint      | Primary key (auto-increment)       |
| session_id    | text        | Session identifier                 |
| vm_id         | text        | VM identifier                      |
| timestamp     | timestamptz | Time of trust score calculation    |
| trust_score   | float8      | Calculated trust score             |
| mfa_required  | bool        | Whether MFA is required            |

**Example SQL:**
```sql
create table if not exists "TrustScore" (
  id bigint generated by default as identity primary key,
  session_id text not null,
  vm_id text not null,
  timestamp timestamptz not null,
  trust_score float8 not null,
  mfa_required bool not null
);
```

---

## Best Practices
- Use `jsonb` for the 62 features to keep the schema flexible.
- Add indexes on `session_id`, `vm_id`, and `timestamp` for faster queries.
- Use Supabase dashboard to manage table permissions and API keys securely.
- Store your Supabase credentials in environment variables or a `.env` file:
  ```
  SUPABASE_URL=your-supabase-url
  SUPABASE_API_KEY=your-supabase-api-key
  ``` 